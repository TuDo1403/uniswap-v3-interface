{"ast":null,"code":"import _slicedToArray from\"/Users/dotu/repo/interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import TokenDetails from'components/Tokens/TokenDetails';import{TokenDetailsPageSkeleton}from'components/Tokens/TokenDetails/Skeleton';import{NATIVE_CHAIN_ID,nativeOnChain}from'constants/tokens';import{useTokenPriceQuery,useTokenQuery}from'graphql/data/__generated__/types-and-hooks';import{CHAIN_NAME_TO_CHAIN_ID,TimePeriod,toHistoryDuration,validateUrlChainParam}from'graphql/data/util';import{useAtom}from'jotai';import{atomWithStorage}from'jotai/utils';import{useMemo}from'react';import{useParams}from'react-router-dom';import{getNativeTokenDBAddress}from'utils/nativeTokens';import{jsx as _jsx}from\"react/jsx-runtime\";export var pageTimePeriodAtom=atomWithStorage('tokenDetailsTimePeriod',TimePeriod.DAY);export default function TokenDetailsPage(){var _useParams=useParams(),tokenAddress=_useParams.tokenAddress,chainName=_useParams.chainName;var chain=validateUrlChainParam(chainName);var pageChainId=CHAIN_NAME_TO_CHAIN_ID[chain];var isNative=tokenAddress===NATIVE_CHAIN_ID;var _useAtom=useAtom(pageTimePeriodAtom),_useAtom2=_slicedToArray(_useAtom,2),timePeriod=_useAtom2[0],setTimePeriod=_useAtom2[1];var _useMemo=useMemo(function(){return[{address:isNative?nativeOnChain(pageChainId).wrapped.address:tokenAddress!==null&&tokenAddress!==void 0?tokenAddress:'',chain:chain},toHistoryDuration(timePeriod)];},[chain,isNative,pageChainId,timePeriod,tokenAddress]),_useMemo2=_slicedToArray(_useMemo,2),contract=_useMemo2[0],duration=_useMemo2[1];var _useTokenQuery=useTokenQuery({variables:{contract:isNative?{address:getNativeTokenDBAddress(chain),chain:chain}:contract}}),tokenQuery=_useTokenQuery.data,tokenQueryLoading=_useTokenQuery.loading;var _useTokenPriceQuery=useTokenPriceQuery({variables:{contract:contract,duration:duration}}),tokenPriceQuery=_useTokenPriceQuery.data;if(!tokenQuery||tokenQueryLoading)return/*#__PURE__*/_jsx(TokenDetailsPageSkeleton,{});return/*#__PURE__*/_jsx(TokenDetails,{urlAddress:tokenAddress,chain:chain,tokenQuery:tokenQuery,tokenPriceQuery:tokenPriceQuery,onChangeTimePeriod:setTimePeriod});}","map":{"version":3,"names":["TokenDetails","TokenDetailsPageSkeleton","NATIVE_CHAIN_ID","nativeOnChain","useTokenPriceQuery","useTokenQuery","CHAIN_NAME_TO_CHAIN_ID","TimePeriod","toHistoryDuration","validateUrlChainParam","useAtom","atomWithStorage","useMemo","useParams","getNativeTokenDBAddress","pageTimePeriodAtom","DAY","TokenDetailsPage","tokenAddress","chainName","chain","pageChainId","isNative","timePeriod","setTimePeriod","address","wrapped","contract","duration","variables","tokenQuery","data","tokenQueryLoading","loading","tokenPriceQuery"],"sources":["/Users/dotu/repo/interface/src/pages/TokenDetails/index.tsx"],"sourcesContent":["import TokenDetails from 'components/Tokens/TokenDetails'\nimport { TokenDetailsPageSkeleton } from 'components/Tokens/TokenDetails/Skeleton'\nimport { NATIVE_CHAIN_ID, nativeOnChain } from 'constants/tokens'\nimport { useTokenPriceQuery, useTokenQuery } from 'graphql/data/__generated__/types-and-hooks'\nimport { CHAIN_NAME_TO_CHAIN_ID, TimePeriod, toHistoryDuration, validateUrlChainParam } from 'graphql/data/util'\nimport { useAtom } from 'jotai'\nimport { atomWithStorage } from 'jotai/utils'\nimport { useMemo } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { getNativeTokenDBAddress } from 'utils/nativeTokens'\n\nexport const pageTimePeriodAtom = atomWithStorage<TimePeriod>('tokenDetailsTimePeriod', TimePeriod.DAY)\n\nexport default function TokenDetailsPage() {\n  const { tokenAddress, chainName } = useParams<{ tokenAddress?: string; chainName?: string }>()\n  const chain = validateUrlChainParam(chainName)\n  const pageChainId = CHAIN_NAME_TO_CHAIN_ID[chain]\n  const isNative = tokenAddress === NATIVE_CHAIN_ID\n  const [timePeriod, setTimePeriod] = useAtom(pageTimePeriodAtom)\n  const [contract, duration] = useMemo(\n    () => [\n      { address: isNative ? nativeOnChain(pageChainId).wrapped.address : tokenAddress ?? '', chain },\n      toHistoryDuration(timePeriod),\n    ],\n    [chain, isNative, pageChainId, timePeriod, tokenAddress]\n  )\n\n  const { data: tokenQuery, loading: tokenQueryLoading } = useTokenQuery({\n    variables: {\n      contract: isNative ? { address: getNativeTokenDBAddress(chain), chain } : contract,\n    },\n  })\n\n  const { data: tokenPriceQuery } = useTokenPriceQuery({\n    variables: {\n      contract,\n      duration,\n    },\n  })\n\n  if (!tokenQuery || tokenQueryLoading) return <TokenDetailsPageSkeleton />\n\n  return (\n    <TokenDetails\n      urlAddress={tokenAddress}\n      chain={chain}\n      tokenQuery={tokenQuery}\n      tokenPriceQuery={tokenPriceQuery}\n      onChangeTimePeriod={setTimePeriod}\n    />\n  )\n}\n"],"mappings":"iJAAA,MAAOA,aAAY,KAAM,gCAAgC,CACzD,OAASC,wBAAwB,KAAQ,yCAAyC,CAClF,OAASC,eAAe,CAAEC,aAAa,KAAQ,kBAAkB,CACjE,OAASC,kBAAkB,CAAEC,aAAa,KAAQ,4CAA4C,CAC9F,OAASC,sBAAsB,CAAEC,UAAU,CAAEC,iBAAiB,CAAEC,qBAAqB,KAAQ,mBAAmB,CAChH,OAASC,OAAO,KAAQ,OAAO,CAC/B,OAASC,eAAe,KAAQ,aAAa,CAC7C,OAASC,OAAO,KAAQ,OAAO,CAC/B,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,uBAAuB,KAAQ,oBAAoB,4CAE5D,MAAO,IAAMC,mBAAkB,CAAGJ,eAAe,CAAa,wBAAwB,CAAEJ,UAAU,CAACS,GAAG,CAAC,CAEvG,cAAe,SAASC,iBAAgB,EAAG,CACzC,eAAoCJ,SAAS,EAAiD,CAAtFK,YAAY,YAAZA,YAAY,CAAEC,SAAS,YAATA,SAAS,CAC/B,GAAMC,MAAK,CAAGX,qBAAqB,CAACU,SAAS,CAAC,CAC9C,GAAME,YAAW,CAAGf,sBAAsB,CAACc,KAAK,CAAC,CACjD,GAAME,SAAQ,CAAGJ,YAAY,GAAKhB,eAAe,CACjD,aAAoCQ,OAAO,CAACK,kBAAkB,CAAC,sCAAxDQ,UAAU,cAAEC,aAAa,cAChC,aAA6BZ,OAAO,CAClC,iBAAM,CACJ,CAAEa,OAAO,CAAEH,QAAQ,CAAGnB,aAAa,CAACkB,WAAW,CAAC,CAACK,OAAO,CAACD,OAAO,CAAGP,YAAY,SAAZA,YAAY,UAAZA,YAAY,CAAI,EAAE,CAAEE,KAAK,CAALA,KAAM,CAAC,CAC9FZ,iBAAiB,CAACe,UAAU,CAAC,CAC9B,GACD,CAACH,KAAK,CAAEE,QAAQ,CAAED,WAAW,CAAEE,UAAU,CAAEL,YAAY,CAAC,CACzD,sCANMS,QAAQ,cAAEC,QAAQ,cAQzB,mBAAyDvB,aAAa,CAAC,CACrEwB,SAAS,CAAE,CACTF,QAAQ,CAAEL,QAAQ,CAAG,CAAEG,OAAO,CAAEX,uBAAuB,CAACM,KAAK,CAAC,CAAEA,KAAK,CAALA,KAAM,CAAC,CAAGO,QAC5E,CACF,CAAC,CAAC,CAJYG,UAAU,gBAAhBC,IAAI,CAAuBC,iBAAiB,gBAA1BC,OAAO,CAMjC,wBAAkC7B,kBAAkB,CAAC,CACnDyB,SAAS,CAAE,CACTF,QAAQ,CAARA,QAAQ,CACRC,QAAQ,CAARA,QACF,CACF,CAAC,CAAC,CALYM,eAAe,qBAArBH,IAAI,CAOZ,GAAI,CAACD,UAAU,EAAIE,iBAAiB,CAAE,mBAAO,KAAC,wBAAwB,IAAG,CAEzE,mBACE,KAAC,YAAY,EACX,UAAU,CAAEd,YAAa,CACzB,KAAK,CAAEE,KAAM,CACb,UAAU,CAAEU,UAAW,CACvB,eAAe,CAAEI,eAAgB,CACjC,kBAAkB,CAAEV,aAAc,EAClC,CAEN"},"metadata":{},"sourceType":"module"}