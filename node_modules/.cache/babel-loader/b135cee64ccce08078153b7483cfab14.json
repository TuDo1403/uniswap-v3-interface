{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/dotu/repo/interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/dotu/repo/interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{i18n}from\"@lingui/core\";import{MouseoverTooltip}from'components/Tooltip';import{Box}from'nft/components/Box';import{Column,Row}from'nft/components/Flex';import{body,bodySmall}from'nft/css/common.css';import{useSellAsset}from'nft/hooks';import{LOOKS_RARE_CREATOR_BASIS_POINTS}from'nft/utils';import{formatEth,formatUsdPrice}from'nft/utils/currency';import{fetchPrice}from'nft/utils/fetchPrice';import{useEffect,useMemo,useState}from'react';import*as styles from'./ListPage.css';import{SetPriceMethod}from'./NFTListingsGrid';import{PriceTextInput}from'./PriceTextInput';import{RoyaltyTooltip}from'./RoyaltyTooltip';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var getRoyalty=function getRoyalty(listingMarket,asset){var _asset$basisPoints;// LooksRare is a unique case where royalties for creators are a flat 0.5% or 50 basis points\nvar baseFee=listingMarket.name==='LooksRare'?LOOKS_RARE_CREATOR_BASIS_POINTS:(_asset$basisPoints=asset.basisPoints)!==null&&_asset$basisPoints!==void 0?_asset$basisPoints:0;return baseFee*0.01;};export var MarketplaceRow=function MarketplaceRow(_ref){var _asset$listingWarning;var globalPriceMethod=_ref.globalPriceMethod,globalPrice=_ref.globalPrice,setGlobalPrice=_ref.setGlobalPrice,selectedMarkets=_ref.selectedMarkets,_ref$removeMarket=_ref.removeMarket,removeMarket=_ref$removeMarket===void 0?undefined:_ref$removeMarket,asset=_ref.asset,showMarketplaceLogo=_ref.showMarketplaceLogo,expandMarketplaceRows=_ref.expandMarketplaceRows;var _useState=useState(),_useState2=_slicedToArray(_useState,2),listPrice=_useState2[0],setListPrice=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),globalOverride=_useState4[0],setGlobalOverride=_useState4[1];var showGlobalPrice=globalPriceMethod===SetPriceMethod.SAME_PRICE&&!globalOverride&&globalPrice;var setAssetListPrice=useSellAsset(function(state){return state.setAssetListPrice;});var removeAssetMarketplace=useSellAsset(function(state){return state.removeAssetMarketplace;});var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),hovered=_useState6[0],setHovered=_useState6[1];var handleHover=function handleHover(){return setHovered(!hovered);};var price=showGlobalPrice?globalPrice:listPrice;var fees=useMemo(function(){if(selectedMarkets.length===1){return getRoyalty(selectedMarkets[0],asset)+selectedMarkets[0].fee;}else{var max=0;var _iterator=_createForOfIteratorHelper(selectedMarkets),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var selectedMarket=_step.value;var fee=selectedMarket.fee+getRoyalty(selectedMarket,asset);max=Math.max(fee,max);}}catch(err){_iterator.e(err);}finally{_iterator.f();}return max;}},[asset,selectedMarkets]);var feeInEth=price&&price*fees/100;var userReceives=price&&feeInEth&&price-feeInEth;useMemo(function(){var _iterator2=_createForOfIteratorHelper(selectedMarkets),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var market=_step2.value;if(market&&asset&&asset.basisPoints){market.royalty=(market.name==='LooksRare'?LOOKS_RARE_CREATOR_BASIS_POINTS:asset.basisPoints)*0.01;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}},[asset,selectedMarkets]);useEffect(function(){if(globalPriceMethod===SetPriceMethod.FLOOR_PRICE){setListPrice(asset===null||asset===void 0?void 0:asset.floorPrice);setGlobalPrice(asset.floorPrice);}else if(globalPriceMethod===SetPriceMethod.PREV_LISTING){setListPrice(asset.lastPrice);setGlobalPrice(asset.lastPrice);}else if(globalPriceMethod===SetPriceMethod.SAME_PRICE)listPrice&&!globalPrice?setGlobalPrice(listPrice):setListPrice(globalPrice);setGlobalOverride(false);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[globalPriceMethod]);useEffect(function(){if(selectedMarkets.length){var _iterator3=_createForOfIteratorHelper(selectedMarkets),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var marketplace=_step3.value;setAssetListPrice(asset,listPrice,marketplace);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}}else setAssetListPrice(asset,listPrice);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[listPrice]);useEffect(function(){var price=undefined;if(globalOverride){if(!listPrice)setListPrice(globalPrice);price=listPrice?listPrice:globalPrice;}else{price=globalPrice;}if(selectedMarkets.length){var _iterator4=_createForOfIteratorHelper(selectedMarkets),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var marketplace=_step4.value;setAssetListPrice(asset,price,marketplace);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}}else setAssetListPrice(asset,price);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[globalOverride]);useEffect(function(){if(globalPriceMethod===SetPriceMethod.SAME_PRICE&&!globalOverride){if(selectedMarkets.length){var _iterator5=_createForOfIteratorHelper(selectedMarkets),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var marketplace=_step5.value;setAssetListPrice(asset,globalPrice,marketplace);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}}else setAssetListPrice(asset,globalPrice);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[globalPrice]);var warning=undefined;if(asset.listingWarnings&&((_asset$listingWarning=asset.listingWarnings)===null||_asset$listingWarning===void 0?void 0:_asset$listingWarning.length)>0){if(showMarketplaceLogo){var _iterator6=_createForOfIteratorHelper(asset.listingWarnings),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var listingWarning=_step6.value;if(listingWarning.marketplace.name===selectedMarkets[0].name)warning=listingWarning;}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}}else{warning=asset.listingWarnings[0];}}return/*#__PURE__*/_jsxs(Row,{transition:\"500\",marginLeft:\"0\",children:[/*#__PURE__*/_jsx(Column,{className:bodySmall,color:\"textSecondary\",textAlign:\"left\",flex:\"1\",display:{sm:'none',xxl:'flex'},children:asset.floorPrice?\"\".concat(asset.floorPrice.toFixed(3),\" ETH\"):'-'}),/*#__PURE__*/_jsx(Column,{className:bodySmall,color:\"textSecondary\",textAlign:\"left\",flex:\"1\",display:{sm:'none',xxl:'flex'},children:asset.lastPrice?\"\".concat(asset.lastPrice.toFixed(3),\" ETH\"):'-'}),/*#__PURE__*/_jsxs(Row,{flex:\"2\",children:[showMarketplaceLogo&&/*#__PURE__*/_jsxs(Column,{position:\"relative\",cursor:\"pointer\",onMouseEnter:handleHover,onMouseLeave:handleHover,onClick:function onClick(e){e.stopPropagation();removeAssetMarketplace(asset,selectedMarkets[0]);removeMarket&&removeMarket();},children:[/*#__PURE__*/_jsx(Box,{className:styles.removeMarketplace,visibility:hovered?'visible':'hidden',position:\"absolute\",children:/*#__PURE__*/_jsx(Box,{as:\"img\",width:\"32\",src:\"/nft/svgs/minusCircle.svg\",alt:\"Remove item\"})}),/*#__PURE__*/_jsx(Box,{as:\"img\",alt:selectedMarkets[0].name,width:\"28\",height:\"28\",borderRadius:\"4\",objectFit:\"cover\",src:selectedMarkets[0].icon,marginRight:\"16\"})]}),globalPriceMethod===SetPriceMethod.SAME_PRICE&&!globalOverride?/*#__PURE__*/_jsx(PriceTextInput,{listPrice:globalPrice,setListPrice:setGlobalPrice,isGlobalPrice:true,setGlobalOverride:setGlobalOverride,globalOverride:globalOverride,warning:warning,asset:asset,shrink:expandMarketplaceRows}):/*#__PURE__*/_jsx(PriceTextInput,{listPrice:listPrice,setListPrice:setListPrice,isGlobalPrice:false,setGlobalOverride:setGlobalOverride,globalOverride:globalOverride,warning:warning,asset:asset,shrink:expandMarketplaceRows})]}),/*#__PURE__*/_jsx(Column,{flex:\"1\",display:{sm:'none',lg:'flex'},children:/*#__PURE__*/_jsx(Box,{className:body,color:\"textSecondary\",width:\"full\",textAlign:\"right\",children:/*#__PURE__*/_jsx(MouseoverTooltip,{text:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Box,{width:\"full\",fontSize:\"14\",children:selectedMarkets.map(function(selectedMarket,index){return/*#__PURE__*/_jsx(RoyaltyTooltip,{selectedMarket:selectedMarket},index);})})}),placement:\"left\",children:fees>0?\"\".concat(fees).concat(selectedMarkets.length>1?/*i18n*/i18n._(\"% max\"):'%'):'--%'})})}),/*#__PURE__*/_jsx(Column,{flex:\"1.5\",display:{sm:'none',lg:'flex'},children:/*#__PURE__*/_jsx(Column,{width:\"full\",children:/*#__PURE__*/_jsx(EthPriceDisplay,{ethPrice:userReceives})})})]});};var EthPriceDisplay=function EthPriceDisplay(_ref2){var _ref2$ethPrice=_ref2.ethPrice,ethPrice=_ref2$ethPrice===void 0?0:_ref2$ethPrice;var _useState7=useState(3000),_useState8=_slicedToArray(_useState7,2),ethConversion=_useState8[0],setEthConversion=_useState8[1];useEffect(function(){fetchPrice().then(function(price){setEthConversion(price!==null&&price!==void 0?price:0);});},[]);return/*#__PURE__*/_jsx(Column,{width:\"full\",children:/*#__PURE__*/_jsx(Row,{width:\"full\",justifyContent:\"flex-end\",color:ethPrice!==0?'textPrimary':'textSecondary',children:ethPrice!==0?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Column,{children:[/*#__PURE__*/_jsxs(Box,{className:body,color:\"textPrimary\",textAlign:\"right\",marginLeft:\"12\",marginRight:\"0\",children:[formatEth(ethPrice),\" ETH\"]}),/*#__PURE__*/_jsx(Box,{className:body,color:\"textSecondary\",textAlign:\"right\",marginLeft:\"12\",marginRight:\"0\",children:formatUsdPrice(ethPrice*ethConversion)})]})}):'- ETH'})});};","map":{"version":3,"names":["MouseoverTooltip","Box","Column","Row","body","bodySmall","useSellAsset","LOOKS_RARE_CREATOR_BASIS_POINTS","formatEth","formatUsdPrice","fetchPrice","useEffect","useMemo","useState","styles","SetPriceMethod","PriceTextInput","RoyaltyTooltip","getRoyalty","listingMarket","asset","baseFee","name","basisPoints","MarketplaceRow","globalPriceMethod","globalPrice","setGlobalPrice","selectedMarkets","removeMarket","undefined","showMarketplaceLogo","expandMarketplaceRows","listPrice","setListPrice","globalOverride","setGlobalOverride","showGlobalPrice","SAME_PRICE","setAssetListPrice","state","removeAssetMarketplace","hovered","setHovered","handleHover","price","fees","length","fee","max","selectedMarket","Math","feeInEth","userReceives","market","royalty","FLOOR_PRICE","floorPrice","PREV_LISTING","lastPrice","marketplace","warning","listingWarnings","listingWarning","sm","xxl","toFixed","e","stopPropagation","removeMarketplace","icon","lg","map","index","EthPriceDisplay","ethPrice","ethConversion","setEthConversion","then"],"sources":["/Users/dotu/repo/interface/src/nft/components/profile/list/MarketplaceRow.tsx"],"sourcesContent":["// eslint-disable-next-line no-restricted-imports\nimport { t } from '@lingui/macro'\nimport { MouseoverTooltip } from 'components/Tooltip'\nimport { Box } from 'nft/components/Box'\nimport { Column, Row } from 'nft/components/Flex'\nimport { body, bodySmall } from 'nft/css/common.css'\nimport { useSellAsset } from 'nft/hooks'\nimport { ListingMarket, ListingWarning, WalletAsset } from 'nft/types'\nimport { LOOKS_RARE_CREATOR_BASIS_POINTS } from 'nft/utils'\nimport { formatEth, formatUsdPrice } from 'nft/utils/currency'\nimport { fetchPrice } from 'nft/utils/fetchPrice'\nimport { Dispatch, useEffect, useMemo, useState } from 'react'\n\nimport * as styles from './ListPage.css'\nimport { SetPriceMethod } from './NFTListingsGrid'\nimport { PriceTextInput } from './PriceTextInput'\nimport { RoyaltyTooltip } from './RoyaltyTooltip'\n\nconst getRoyalty = (listingMarket: ListingMarket, asset: WalletAsset) => {\n  // LooksRare is a unique case where royalties for creators are a flat 0.5% or 50 basis points\n  const baseFee = listingMarket.name === 'LooksRare' ? LOOKS_RARE_CREATOR_BASIS_POINTS : asset.basisPoints ?? 0\n\n  return baseFee * 0.01\n}\n\ninterface MarketplaceRowProps {\n  globalPriceMethod?: SetPriceMethod\n  globalPrice?: number\n  setGlobalPrice: Dispatch<number | undefined>\n  selectedMarkets: ListingMarket[]\n  removeMarket?: () => void\n  asset: WalletAsset\n  showMarketplaceLogo: boolean\n  expandMarketplaceRows?: boolean\n}\n\nexport const MarketplaceRow = ({\n  globalPriceMethod,\n  globalPrice,\n  setGlobalPrice,\n  selectedMarkets,\n  removeMarket = undefined,\n  asset,\n  showMarketplaceLogo,\n  expandMarketplaceRows,\n}: MarketplaceRowProps) => {\n  const [listPrice, setListPrice] = useState<number>()\n  const [globalOverride, setGlobalOverride] = useState(false)\n  const showGlobalPrice = globalPriceMethod === SetPriceMethod.SAME_PRICE && !globalOverride && globalPrice\n  const setAssetListPrice = useSellAsset((state) => state.setAssetListPrice)\n  const removeAssetMarketplace = useSellAsset((state) => state.removeAssetMarketplace)\n  const [hovered, setHovered] = useState(false)\n  const handleHover = () => setHovered(!hovered)\n\n  const price = showGlobalPrice ? globalPrice : listPrice\n\n  const fees = useMemo(() => {\n    if (selectedMarkets.length === 1) {\n      return getRoyalty(selectedMarkets[0], asset) + selectedMarkets[0].fee\n    } else {\n      let max = 0\n      for (const selectedMarket of selectedMarkets) {\n        const fee = selectedMarket.fee + getRoyalty(selectedMarket, asset)\n        max = Math.max(fee, max)\n      }\n\n      return max\n    }\n  }, [asset, selectedMarkets])\n\n  const feeInEth = price && (price * fees) / 100\n  const userReceives = price && feeInEth && price - feeInEth\n\n  useMemo(() => {\n    for (const market of selectedMarkets) {\n      if (market && asset && asset.basisPoints) {\n        market.royalty = (market.name === 'LooksRare' ? LOOKS_RARE_CREATOR_BASIS_POINTS : asset.basisPoints) * 0.01\n      }\n    }\n  }, [asset, selectedMarkets])\n\n  useEffect(() => {\n    if (globalPriceMethod === SetPriceMethod.FLOOR_PRICE) {\n      setListPrice(asset?.floorPrice)\n      setGlobalPrice(asset.floorPrice)\n    } else if (globalPriceMethod === SetPriceMethod.PREV_LISTING) {\n      setListPrice(asset.lastPrice)\n      setGlobalPrice(asset.lastPrice)\n    } else if (globalPriceMethod === SetPriceMethod.SAME_PRICE)\n      listPrice && !globalPrice ? setGlobalPrice(listPrice) : setListPrice(globalPrice)\n\n    setGlobalOverride(false)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [globalPriceMethod])\n\n  useEffect(() => {\n    if (selectedMarkets.length)\n      for (const marketplace of selectedMarkets) setAssetListPrice(asset, listPrice, marketplace)\n    else setAssetListPrice(asset, listPrice)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [listPrice])\n\n  useEffect(() => {\n    let price: number | undefined = undefined\n    if (globalOverride) {\n      if (!listPrice) setListPrice(globalPrice)\n      price = listPrice ? listPrice : globalPrice\n    } else {\n      price = globalPrice\n    }\n    if (selectedMarkets.length) for (const marketplace of selectedMarkets) setAssetListPrice(asset, price, marketplace)\n    else setAssetListPrice(asset, price)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [globalOverride])\n\n  useEffect(() => {\n    if (globalPriceMethod === SetPriceMethod.SAME_PRICE && !globalOverride) {\n      if (selectedMarkets.length)\n        for (const marketplace of selectedMarkets) setAssetListPrice(asset, globalPrice, marketplace)\n      else setAssetListPrice(asset, globalPrice)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [globalPrice])\n\n  let warning: ListingWarning | undefined = undefined\n  if (asset.listingWarnings && asset.listingWarnings?.length > 0) {\n    if (showMarketplaceLogo) {\n      for (const listingWarning of asset.listingWarnings) {\n        if (listingWarning.marketplace.name === selectedMarkets[0].name) warning = listingWarning\n      }\n    } else {\n      warning = asset.listingWarnings[0]\n    }\n  }\n\n  return (\n    <Row transition=\"500\" marginLeft=\"0\">\n      <Column\n        className={bodySmall}\n        color=\"textSecondary\"\n        textAlign=\"left\"\n        flex=\"1\"\n        display={{ sm: 'none', xxl: 'flex' }}\n      >\n        {asset.floorPrice ? `${asset.floorPrice.toFixed(3)} ETH` : '-'}\n      </Column>\n      <Column\n        className={bodySmall}\n        color=\"textSecondary\"\n        textAlign=\"left\"\n        flex=\"1\"\n        display={{ sm: 'none', xxl: 'flex' }}\n      >\n        {asset.lastPrice ? `${asset.lastPrice.toFixed(3)} ETH` : '-'}\n      </Column>\n\n      <Row flex=\"2\">\n        {showMarketplaceLogo && (\n          <Column\n            position=\"relative\"\n            cursor=\"pointer\"\n            onMouseEnter={handleHover}\n            onMouseLeave={handleHover}\n            onClick={(e) => {\n              e.stopPropagation()\n              removeAssetMarketplace(asset, selectedMarkets[0])\n              removeMarket && removeMarket()\n            }}\n          >\n            <Box className={styles.removeMarketplace} visibility={hovered ? 'visible' : 'hidden'} position=\"absolute\">\n              <Box as=\"img\" width=\"32\" src=\"/nft/svgs/minusCircle.svg\" alt=\"Remove item\" />\n            </Box>\n            <Box\n              as=\"img\"\n              alt={selectedMarkets[0].name}\n              width=\"28\"\n              height=\"28\"\n              borderRadius=\"4\"\n              objectFit=\"cover\"\n              src={selectedMarkets[0].icon}\n              marginRight=\"16\"\n            />\n          </Column>\n        )}\n        {globalPriceMethod === SetPriceMethod.SAME_PRICE && !globalOverride ? (\n          <PriceTextInput\n            listPrice={globalPrice}\n            setListPrice={setGlobalPrice}\n            isGlobalPrice={true}\n            setGlobalOverride={setGlobalOverride}\n            globalOverride={globalOverride}\n            warning={warning}\n            asset={asset}\n            shrink={expandMarketplaceRows}\n          />\n        ) : (\n          <PriceTextInput\n            listPrice={listPrice}\n            setListPrice={setListPrice}\n            isGlobalPrice={false}\n            setGlobalOverride={setGlobalOverride}\n            globalOverride={globalOverride}\n            warning={warning}\n            asset={asset}\n            shrink={expandMarketplaceRows}\n          />\n        )}\n      </Row>\n\n      <Column flex=\"1\" display={{ sm: 'none', lg: 'flex' }}>\n        <Box className={body} color=\"textSecondary\" width=\"full\" textAlign=\"right\">\n          <MouseoverTooltip\n            text={\n              <Row>\n                <Box width=\"full\" fontSize=\"14\">\n                  {selectedMarkets.map((selectedMarket, index) => {\n                    return <RoyaltyTooltip selectedMarket={selectedMarket} key={index} />\n                  })}\n                </Box>\n              </Row>\n            }\n            placement=\"left\"\n          >\n            {fees > 0 ? `${fees}${selectedMarkets.length > 1 ? t`% max` : '%'}` : '--%'}\n          </MouseoverTooltip>\n        </Box>\n      </Column>\n\n      <Column flex=\"1.5\" display={{ sm: 'none', lg: 'flex' }}>\n        <Column width=\"full\">\n          <EthPriceDisplay ethPrice={userReceives} />\n        </Column>\n      </Column>\n    </Row>\n  )\n}\n\nconst EthPriceDisplay = ({ ethPrice = 0 }: { ethPrice?: number }) => {\n  const [ethConversion, setEthConversion] = useState(3000)\n  useEffect(() => {\n    fetchPrice().then((price) => {\n      setEthConversion(price ?? 0)\n    })\n  }, [])\n\n  return (\n    <Column width=\"full\">\n      <Row width=\"full\" justifyContent=\"flex-end\" color={ethPrice !== 0 ? 'textPrimary' : 'textSecondary'}>\n        {ethPrice !== 0 ? (\n          <>\n            <Column>\n              <Box className={body} color=\"textPrimary\" textAlign=\"right\" marginLeft=\"12\" marginRight=\"0\">\n                {formatEth(ethPrice)} ETH\n              </Box>\n              <Box className={body} color=\"textSecondary\" textAlign=\"right\" marginLeft=\"12\" marginRight=\"0\">\n                {formatUsdPrice(ethPrice * ethConversion)}\n              </Box>\n            </Column>\n          </>\n        ) : (\n          '- ETH'\n        )}\n      </Row>\n    </Column>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}